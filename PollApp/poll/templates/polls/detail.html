{% extends "base.html" %}

{% block title %}{% endblock %}

{% block content %}
	<p>
	{{ poll.description }}
	</p>
	<h5>Creator: {{ poll.owner }}</h5>
	<form action="{% url 'poll:detail' poll.id %}" method="post">
	  {% csrf_token %}
	  <fieldset>
	    {% for id, choice in choices.items %}
	      <input type="radio" id="{{ id }}" name="choices" value="{{ id }}" required/> 
	      <label for="{{ id }}">{{ choice|first }} {{ choice|last }}%</label>	
	    {% endfor %}
	  </fieldset>
		<input type="submit" value="Save choice">
	</form>
	{% if request.user == poll.owner %}
		<div id="options">
			<button type="button" id="delete-btn">
				Delete
			</button>
		</div>
	{% endif %}
{% endblock %}

{% block domready %}
<script type="text/javascript">
	
	const delete_btn = document.getElementById('delete-btn');
	delete_btn.addEventListener('click', function() {
    // Display a confirmation dialog
    var confirmDelete = confirm("Do you want to delete this poll?");

    // If the user clicks "OK" in the confirmation dialog
    if (confirmDelete) {
      // Redirect to the delete view URL
      window.location.href = "{% url 'poll:delete' poll.id %}";
    };
  });
</script>
{% endblock %}